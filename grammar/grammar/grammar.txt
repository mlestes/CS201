unary : INTEGER
      | REAL
      | VARIABLE
      | OPEN_PAREN expression CLOSE_PAREN
      | STRING
      | operator unary
      | unary operator
      | VARIABLE OPEN_PAREN expressionlist CLOSE_PAREN
      | RETURN expression
      | BREAK
      | CONTINUE

ternary : expression QUESTION expression COLON expression

expression : unary
           | ternary
           | unary operator expression

expressionlist : expression
               | expression expressionlist
               | EMPTY

operator : PLUS
         | TIMES
         | MINUS
         | DIVIDE
         | MOD
         | POW
         | EQUALS
         | PLUS PLUS
         | MINUS MINUS
         | operator EQUALS
         | GREATER_THAN
         | LESS_THAN
         | NOT
         | NOT operator
         | GREATER_THAN EQUALS
         | LESS_THAN EQUALS
         | DOT
         | AND
         | OR
         | XOR

ifstate : IF OPEN_PAREN expression CLOSE_PAREN block elsestate

elsestate : ELSE block
          | EMPTY

whilestate : WHILE OPEN_PAREN expression CLOSE_PAREN block

block : BEGIN statementlist END
      | EMPTY

statementlist : statement
              | statement statementlist
              | EMPTY

statement : expression SEMI_COLON
          | vardef SEMI_COLON
          | ifstate
          | whilestate

vardef : VAR VARIABLE ASSIGN expression
       | VAR VARIABLE

funcdef : FUNCTION VARIABLE OPEN_PAREN parameterlist CLOSE_PAREN block
        | FUNCTION VARIABLE SEMI_COLON

parameterlist : VARIABLE
              | VARIABLE parameterlist
              | EMPTY

structdef : STRUCT VARIABLE block

program : funcdef
        | structdef
        | expression
        | funcdef program
        | expression program
        | structdef program
